% Definición de jugadores

% es_jugador(Nombre, GolesTemporada, Asistencias, Regates, Recuperaciones, Tiros_totales, Pases_totales, Pases_completados, Pases_clave, Intercepciones, Tarjetas_amarillas, Tarjetas_rojas, Minutos_jugados, Partidos_jugados, Goles_pp, Goles_encajados, Penaltis, Penaltis_parados).
es_jugador('David De Gea', 0, 0, 0, 0, 0, 0, 220, 0, 3, 1, 0, 2430, 27, 0, 35, 3, 1).
es_jugador('Iñaki Peña', 0, 0, 0, 0, 0, 0, 50, 0, 1, 0, 0, 540, 6, 0, 8, 0, 0).
es_jugador('Unai Simon', 0, 0, 0, 0, 0, 0, 300, 0, 0, 0, 0, 1603, 17, 0, 7, 2, 1).
es_jugador('Robert Sánchez', 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 17, 1, 0, 1, 1, 0).
es_jugador('Josep Martinez', 0, 1, 2, 5, 8, 200, 17, 4, 3, 0, 0, 23, 1, 0, 2, 0, 0).
es_jugador('Alvaro Fernandez', 0, 2, 5, 12, 6, 180, 150, 7, 4, 1, 0, 670, 8, 0, 4, 1, 0).
es_jugador('Jorge Cuenca', 0, 1, 3, 9, 5, 150, 120, 6, 5, 0, 0, 630, 7, 0, 0, 0 , 0).
es_jugador('Eric Garcia', 0, 3, 7, 14, 9, 250, 220, 10, 6, 0, 0, 1200, 13, 0, 0, 0 , 0).
es_jugador('Hugo Guillamon', 0, 1, 3, 8, 6, 180, 150, 5, 4, 0, 0, 820, 9, 0, 0, 0 , 0).
es_jugador('Raul Albiol', 0, 2, 6, 10, 8, 220, 180, 8, 7, 0, 0, 1000, 11, 0, 0, 0 , 0).
es_jugador('Diego Llorente', 0, 2, 5, 12, 7, 200, 170, 7, 5, 1, 0, 1100, 12, 0, 0, 0 , 0).
es_jugador('Aymeric Laporte', 1, 1, 4, 10, 6, 210, 180, 5, 6, 2, 0, 1400, 15, 0, 0, 0 , 0).
es_jugador('Iñigo Martínez', 0, 1, 3, 9, 5, 180, 150, 4, 5, 1, 0, 900, 10, 0, 0, 0 , 0).
es_jugador('Sergio Ramos', 0, 2, 5, 12, 7, 220, 190, 6, 6, 0, 0, 950, 10, 0, 0, 0 , 0).
es_jugador('Pau Torres', 0, 2, 5, 11, 7, 210, 180, 7, 5, 1, 0, 1150, 13, 0, 0, 0 , 0).
es_jugador('Oscar Gil', 0, 1, 3, 8, 6, 190, 160, 5, 4, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Pedro Porro', 0, 2, 5, 10, 7, 220, 190, 6, 5, 1, 0, 850, 9, 0, 0, 0 , 0).
es_jugador('Cesar Azpilicueta', 1, 1, 3, 10, 6, 210, 180, 4, 5, 0, 0, 1400, 15, 0, 0, 0 , 0).
es_jugador('Dani Carvajal', 0, 2, 6, 12, 8, 230, 200, 6, 6, 1, 0, 950, 10, 0, 0, 0 , 0).
es_jugador('Oscar Mingueza', 0, 1, 3, 8, 6, 190, 160, 4, 4, 0, 0, 900, 10, 0, 0, 0 , 0).
es_jugador('Sergi Roberto', 0, 1, 3, 8, 6, 190, 160, 4, 4, 0, 0, 600, 7, 0, 0, 0 , 0).
es_jugador('Jordi Alba', 0, 2, 6, 12, 8, 230, 200, 8, 6, 2, 0, 1500, 16, 0, 0, 0 , 0).
es_jugador('José Luis Gayá', 1, 1, 3, 10, 6, 210, 180, 4, 5, 0, 0, 1100, 12, 0, 0, 0 , 0).
es_jugador('Marcos Alonso', 0, 1, 3, 9, 6, 200, 170, 4, 5, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Juan Miranda', 1, 1, 3, 8, 6, 190, 160, 4, 4, 0, 0, 600, 7, 0, 0, 0 , 0).
es_jugador('Sergio Reguilon', 0, 1, 3, 9, 6, 200, 170, 4, 5, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Antonio Blanco', 0, 1, 3, 8, 6, 190, 160, 4, 4, 0, 0, 600, 7, 0, 0, 0 , 0).
es_jugador('Sergio Busquets', 0, 3, 7, 14, 9, 250, 220, 10, 6, 0, 0, 1800, 18, 0, 0, 0 , 0).
es_jugador('Rodri', 0, 3, 7, 14, 9, 250, 220, 8, 6, 1, 0, 1700, 17, 0, 0, 0 , 0).
es_jugador('Fran Beltran', 0, 1, 3, 8, 6, 190, 160, 4, 4, 0, 0, 600, 7, 0, 0, 0 , 0).
es_jugador('Gavi', 0, 2, 6, 12, 8, 230, 200, 7, 6, 0, 0, 1200, 13, 0, 0, 0 , 0).
es_jugador('Gonzalo Villar', 0, 1, 3, 9, 6, 200, 170, 5, 5, 0, 0, 700, 8, 0, 0, 0 , 0).
es_jugador('Martin Zubimendi', 0, 2, 6, 11, 8, 220, 190, 6, 5, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Marcos Llorente', 0, 3, 7, 13, 9, 240, 210, 8, 7, 0, 0, 1400, 15, 0, 0, 0 , 0).
es_jugador('Mikel Merino', 0, 2, 6, 12, 8, 230, 200, 7, 6, 0, 0, 900, 10, 0, 0, 0 , 0).
es_jugador('Fabian Ruiz', 0, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Thiago Alcantara', 0, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Marc Cucurella', 0, 1, 3, 9, 6, 200, 170, 5, 5, 0, 0, 700, 8, 0, 0, 0 , 0).
es_jugador('Bryan Gil', 0, 2, 6, 11, 8, 220, 190, 6, 5, 0, 0, 900, 10, 0, 0, 0 , 0).
es_jugador('Koke Resurreccion', 0, 3, 7, 14, 9, 250, 220, 9, 7, 0, 0, 1800, 18, 0, 0, 0 , 0).
es_jugador('Manu Garcia', 0, 1, 3, 9, 6, 200, 170, 5, 5, 0, 0, 700, 8, 0, 0, 0 , 0).
es_jugador('Brais Mendez', 0, 1, 3, 9, 6, 200, 170, 5, 5, 1, 0, 600, 7, 0, 0, 0 , 0).
es_jugador('Alejandro Pozo', 0, 1, 3, 9, 6, 200, 170, 5, 5, 0, 0, 700, 8, 0, 0, 0 , 0).
es_jugador('Pablo Fornals', 1, 1, 3, 10, 6, 210, 180, 5, 6, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Dani Olmo', 2, 2, 7, 13, 9, 240, 210, 9, 8, 0, 0, 1400, 15, 0, 0, 0 , 0).
es_jugador('Pedri', 0, 2, 6, 12, 8, 230, 200, 7, 6, 0, 0, 1500, 16, 1, 0, 0 , 0).
es_jugador('Carlos Soler', 2, 2, 6, 13, 9, 240, 210, 6, 7, 0, 0, 1000, 11, 0, 0, 0 , 0).
es_jugador('Ferran Torres', 8, 3, 7, 14, 9, 250, 220, 8, 7, 0, 0, 1900, 20, 0, 0, 0 , 0).
es_jugador('Sergio Canales', 0, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 900, 10, 0, 0, 0 , 0).
es_jugador('Brahim Diaz', 1, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 700, 8, 0, 0, 0 , 0).
es_jugador('Raul De Tomas', 0, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 800, 9, 0, 0, 0 , 0).
es_jugador('Gerard Moreno', 1, 2, 6, 12, 8, 230, 200, 7, 6, 0, 0, 1000, 11, 0, 0, 0 , 0).
es_jugador('Álvaro Morata', 5, 3, 7, 14, 9, 250, 220, 8, 7, 0, 0, 1800, 18, 0, 0, 0 , 0).
es_jugador('Rodrigo', 0, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 900, 10, 0, 0, 0 , 0).
es_jugador('Abel Ruiz', 0, 1, 3, 9, 6, 200, 170, 5, 5, 0, 0, 700, 8, 0, 0, 0 , 0).
es_jugador('Pablo Sarabia', 4, 2, 6, 12, 8, 230, 200, 7, 6, 2, 0, 1600, 17, 0, 0, 0 , 0).
es_jugador('Adama Traore', 0, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 900, 10, 0, 0, 0 , 0).
es_jugador('Javi Puado', 1, 2, 6, 12, 8, 230, 200, 6, 6, 0, 0, 700, 8, 0, 0, 0 , 0).
es_jugador('Mikel Oyarzabal', 2, 2, 6, 12, 8, 230, 200, 7, 6, 1, 0, 1200, 13, 0, 0, 0 , 0).
es_jugador('Yeremi Pino', 0, 1, 3, 9, 6, 200, 170, 5, 5, 1, 0, 800, 9, 0, 0, 0 , 0).

% Definición de posiciones
es_portero('Unai Simon').
es_portero('Robert Sánchez').
es_portero('David De Gea').
es_portero('Iñaki Peña').
es_portero('Josep Martinez').
es_portero('Alvaro Fernandez').
es_dfc('Jorge Cuenca').
es_dfc('Eric Garcia').
es_dfc('Hugo Guillamon').
es_dfc('Raul Albiol').
es_dfc('Diego Llorente').
es_dfc('Aymeric Laporte').
es_dfc('Iñigo Martínez').
es_dfc('Sergio Ramos').
es_dfc('Pau Torres').
es_ld('Oscar Gil').
es_ld('Pedro Porro').
es_ld('Cesar Azpilicueta').
es_ld('Dani Carvajal').
es_ld('Oscar Mingueza').
es_ld('Sergi Roberto').
es_li('Jordi Alba').
es_li('José Luis Gaya').
es_li('Marcos Alonso').
es_li('Juan Miranda').
es_li('Sergio Reguilon').
es_mcd('Antonio Blanco').
es_mcd('Sergio Busquets').
es_mcd('Rodri').
es_mc('Fran Beltran').
es_mc('Gavi').
es_mc('Gonzalo Villar').
es_mcd('Martín Zubimendi').
es_mc('Marcos Llorente').
es_mc('Mikel Merino').
es_mc('Fabian Ruiz').
es_mc('Thiago Alcantara').
es_mc('Marc Cucurella').
es_ed('Bryan Gil').
es_mc('Koke Resurreccion').
es_mco('Manu Garcia').
es_mco('Brais Mendez').
es_ed('Alejandro Pozo').
es_mco('Pablo Fornals').
es_mco('Dani Olmo').
es_mc('Pedri').
es_mc('Carlos Soler').
es_ei('Ferran Torres').
es_mco('Sergio Canales').
es_mco('Brahim Diaz').
es_dc('Raul De Tomas').
es_dc('Gerard Moreno').
es_dc('Álvaro Morata').
es_dc('Rodrigo').
es_dc('Abel Ruiz').
es_ed('Pablo Sarabia').
es_ed('Adama Traore').
es_ei('Javi Puado').
es_ei('Mikel Oyarzabal').
es_ed('Yeremi Pino').


% Definicion de pie dominante
es_zurdo('Jorge Cuenca').
es_zurdo('Aymeric Laporte').
es_zurdo('Iñigo Martínez').
es_zurdo('Pau Torres').
es_zurdo('Oscar Gil').
es_zurdo('Jordi Alba').
es_zurdo('José Luis Gaya').
es_zurdo('Marcos Alonso').
es_zurdo('Juan Miranda').
es_zurdo('Sergio Reguilon').
es_zurdo('Mikel Merino').
es_zurdo('Fabian Ruiz').
es_zurdo('Marc Cucurella').
es_zurdo('Bryan Gil').
es_zurdo('Brais Mendez').
es_zurdo('Sergio Canales').
es_zurdo('Brahim Diaz').
es_zurdo('Gerard Moreno').
es_zurdo('Rodrigo').
es_zurdo('Pablo Sarabia').
es_zurdo('Mikel Oyarzabal').

es_diestro(Jugador) :- not(es_zurdo(Jugador)).


promedio_portero_goles_encajados(Jugador, Promedio_Goles_Encajados):-
    es_portero(Jugador), % Comprobamos si es portero
    es_jugador(Jugador,_,_,_,_,_,_,_,_,_,_,_,Minutos_jugados,Partidos_jugados, _, Goles_encajados, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Goles_encajados > 0 , 
    Promedio_Goles_Encajados is Goles_encajados / Minutos_jugados.


promedio_portero_penaltis_parados(Jugador, Promedio_Penaltis_Parados):-
    es_portero(Jugador), % Comprobamos si es portero
    es_jugador(Jugador,_,_,_,_,_,_,_,_,_,_,_,_, Partidos_jugados, _, _, Penaltis, Penaltis_parados),
    Partidos_jugados > 0, % Evitar división por cero    
    Penaltis_parados > 0, % Evitar división por cero    
    Promedio_Penaltis_Parados is Penaltis / Penaltis_parados.


promedio_tarjetas_rojas(Jugador, Promedio_Tarjetas_Rojas):-
    es_jugador(Jugador,_,_,_,_,_,_,_,_,_,_,Tarjetas_rojas,Minutos_jugados, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Promedio_Tarjetas_Rojas is Tarjetas_rojas / Minutos_jugados.



promedio_tarjetas_amarillas(Jugador,Promedio_Tarjetas_Amarillas):-
    es_jugador(Jugador,_,_,_,_,_,_,_,_,_,Tarjetas_amarillas,_,Minutos_jugados, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Promedio_Tarjetas_Amarillas is Tarjetas_amarillas / Minutos_jugados.



promedio_intercepciones(Jugador, Promedio_Intercepciones):-
    es_jugador(Jugador,_,_,_,_,_,_,_,_, Intercepciones,_,_, Minutos_jugados, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Minutos_jugados > 0,
    Promedio_Intercepciones is Intercepciones / Minutos_jugados.


promedio_pases_clave(Jugador, Promedio_Pases_Clave):-
    es_jugador(Jugador,_,_,_,_,_, Pases_totales,_,Pases_clave,_,_,_,_, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Pases_totales > 0,
    Promedio_Pases_Clave is Pases_clave / Pases_totales.



promedio_pases_completados(Jugador, Promedio_Pases_Completados):-
    es_jugador(Jugador,_,_,_,_,_, Pases_totales, Pases_completados,_,_,_,_,_, Partidos_jugados, _, _ , _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Pases_totales > 0 ,
    Promedio_Pases_Completados is Pases_completados / Pases_totales.


promedio_asistencias(Jugador, Promedio_Asistencias):-
    es_jugador(Jugador,_, Asistencias, _,_,_,_,_,_,_,_,_,_, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Promedio_Asistencias is Asistencias / Partidos_jugados.


promedio_regates(Jugador, Promedio_Regates):- 
    es_jugador(Jugador,_,_,Regates,_,_,_,_,_,_,_,_,_, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Promedio_Regates is Regates / Partidos_jugados.


promedio_duelos_ganados(Jugador, Promedio_Duelos_Ganados):- 
    es_jugador(Jugador,_,_,_,Duelos_Ganados, _,_,_,_,_,_,_,_, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Promedio_Duelos_Ganados is Duelos_Ganados / Partidos_jugados.



promedio_goles_acertados(Jugador, Promedio_Goles_Acertados):- 
    es_jugador(Jugador,GolesTemporada,_,_,_,Tiros_totales,_,_,_,_,_,_,_, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Tiros_totales > 0, 
    Promedio_Goles_Acertados is GolesTemporada / Tiros_totales.



promedio_pases(Jugador, Promedio_Pases):- 
    es_jugador(Jugador,_,_,_,_,_,Pases_totales,_,_,_,_,_,_, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Pases_totales > 0 ,
    Promedio_Pases is Pases_totales / Partidos_jugados.



promedio_minutos_por_partido(Jugador, Promedio_Minutos_por_Partido):- 
    es_jugador(Jugador,_,_,_,_,_,_,_,_,_,_,_, Minutos_jugados, Partidos_jugados, _, _, _, _),
    Partidos_jugados > 0, % Evitar división por cero
    Promedio_Minutos_por_Partido is Minutos_jugados / Partidos_jugados.



ranking_porteros(PorterosRanking) :-
    findall(Puntuacion-Jugador, (es_portero(Jugador),
                                  promedio_portero_goles_encajados(Jugador, PromedioGolesEncajados),
                                  promedio_portero_penaltis_parados(Jugador, PromedioPenaltisParados),
                                  promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
                                  promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
                                  promedio_intercepciones(Jugador, PromedioIntercepciones),
                                  Puntuacion is PromedioPenaltisParados - PromedioGolesEncajados - PromedioTarjetasRojas - PromedioTarjetasAmarillas + PromedioIntercepciones
                                 ),
            ListaPuntuaciones),
    keysort(ListaPuntuaciones, ListaOrdenada),
    reverse(ListaOrdenada, PorterosRanking),
    format_output_portero(PorterosRanking).

format_output_portero([]).
format_output_portero([Puntuacion-Jugador|Resto]) :-
    format("~2f - ~s~n", [Puntuacion, Jugador]),
    format_output_portero(Resto).




ranking_defensas(DefensasRanking) :-
    findall(Puntuacion-Tipo-Jugador,
            ( es_dfc(Jugador), Tipo = 'Centro',
              calcular_puntuacion_dfc(Jugador, Puntuacion)
            ;
              es_ld(Jugador), Tipo = 'Lateral derecho',
              calcular_puntuacion_ld(Jugador, Puntuacion)
            ;
              es_li(Jugador), Tipo = 'Lateral izquierdo',
              calcular_puntuacion_li(Jugador, Puntuacion)
            ),
            ListaPuntuaciones),
    keysort(ListaPuntuaciones, ListaOrdenada),
    reverse(ListaOrdenada, DefensasRanking),
    format_output(DefensasRanking).

format_output([]).
format_output([Puntuacion-Tipo-Jugador|Resto]) :-
    format("~2f - ~s - ~s~n", [Puntuacion, Tipo, Jugador]),
    format_output(Resto).




calcular_puntuacion_dfc(Jugador, Puntuacion) :-
    promedio_intercepciones(Jugador, PromedioIntercepciones),
    promedio_duelos_ganados(Jugador, PromedioDuelosGanados),
    promedio_pases_clave(Jugador, PromedioPasesClave),
    promedio_pases_completados(Jugador, PromedioPasesCompletados),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioIntercepciones * 0.4 +
                  PromedioDuelosGanados * 0.3 +
                  PromedioPasesClave * 0.2 +
                  PromedioPasesCompletados * 0.1 -
                  PromedioTarjetasAmarillas * 0.3 -
                  PromedioTarjetasRojas * 0.3.

calcular_puntuacion_ld(Jugador, Puntuacion) :-
    promedio_intercepciones(Jugador, PromedioIntercepciones),
    promedio_duelos_ganados(Jugador, PromedioDuelosGanados),
    promedio_pases_clave(Jugador, PromedioPasesClave),
    promedio_pases_completados(Jugador, PromedioPasesCompletados),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioIntercepciones * 0.3 +
                  PromedioDuelosGanados * 0.2 +
                  PromedioPasesClave * 0.3 +
                  PromedioPasesCompletados * 0.2-
                  PromedioTarjetasAmarillas * 0.3 -
                  PromedioTarjetasRojas * 0.3.

calcular_puntuacion_li(Jugador, Puntuacion) :-
    promedio_intercepciones(Jugador, PromedioIntercepciones),
    promedio_duelos_ganados(Jugador, PromedioDuelosGanados),
    promedio_pases_clave(Jugador, PromedioPasesClave),
    promedio_pases_completados(Jugador, PromedioPasesCompletados),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioIntercepciones * 0.3 +
                  PromedioDuelosGanados * 0.3 +
                  PromedioPasesClave * 0.1 +
                  PromedioPasesCompletados * 0.3 -
                  PromedioTarjetasAmarillas * 0.3 -
                  PromedioTarjetasRojas * 0.3.


ranking_mediocentros(MediocentrosRanking) :-
    findall(Puntuacion-Tipo-Jugador,
            ( es_mc(Jugador), Tipo = 'Mediocentro central',
              calcular_puntuacion_mc(Jugador, Puntuacion)
            ;
              es_mcd(Jugador), Tipo = 'Mediocentro defensivo',
              calcular_puntuacion_mcd(Jugador, Puntuacion)
            ;
              es_mco(Jugador), Tipo = 'Mediocentro ofensivo',
              calcular_puntuacion_mco(Jugador, Puntuacion)
            ),
            ListaPuntuaciones),
    keysort(ListaPuntuaciones, ListaOrdenada),
    reverse(ListaOrdenada, MediocentrosRanking),
    format_output(MediocentrosRanking).

format_output([]).
format_output([Puntuacion-Tipo-Jugador|Resto]) :-
    format("~2f - ~s - ~s~n", [Puntuacion, Tipo, Jugador]),
    format_output(Resto).


calcular_puntuacion_mc(Jugador, Puntuacion) :-
    promedio_pases_clave(Jugador, PromedioPasesClave),
    promedio_regates(Jugador, PromedioRegates),
    promedio_goles_acertados(Jugador, PromedioGolesAcertados),
    promedio_intercepciones(Jugador, PromedioIntercepciones),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioPasesClave * 0.4 +
                  PromedioRegates * 0.2 +
                  PromedioGolesAcertados * 0.2 +
                  PromedioIntercepciones * 0.2-
                  PromedioTarjetasAmarillas * 0.2 -
                  PromedioTarjetasRojas * 0.2.

calcular_puntuacion_mcd(Jugador, Puntuacion) :-
    promedio_pases_completados(Jugador, PromedioPasesCompletados),
    promedio_regates(Jugador, PromedioRegates),
    promedio_goles_acertados(Jugador, PromedioGolesAcertados),
    promedio_intercepciones(Jugador, PromedioIntercepciones),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioPasesCompletados * 0.3 +
                  PromedioRegates * 0.1 +
                  PromedioGolesAcertados * 0.1 +
                  PromedioIntercepciones * 0.5 -
                  PromedioTarjetasAmarillas * 0.2 -
                  PromedioTarjetasRojas * 0.2.

calcular_puntuacion_mco(Jugador, Puntuacion) :-
    promedio_pases_clave(Jugador, PromedioPasesClave),
    promedio_regates(Jugador, PromedioRegates),
    promedio_goles_acertados(Jugador, PromedioGolesAcertados),
    promedio_intercepciones(Jugador, PromedioIntercepciones),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioPasesClave * 0.2 +
                  PromedioRegates * 0.3 +
                  PromedioGolesAcertados * 0.4 +
                  PromedioIntercepciones * 0.1-
                  PromedioTarjetasAmarillas * 0.2 -
                  PromedioTarjetasRojas * 0.2.

ranking_delanteros(DelanterosRanking) :-
    findall(Puntuacion-Tipo-Jugador,
            ( es_dc(Jugador), Tipo = 'Delantero centro ',
              calcular_puntuacion_dc(Jugador, Puntuacion)
            ;
              es_ed(Jugador), Tipo = 'Extremo derecho',
              calcular_puntuacion_ed(Jugador, Puntuacion)
            ;
              es_ei(Jugador), Tipo = 'Extremo izquierdo',
              calcular_puntuacion_ei(Jugador, Puntuacion)
            ),
            ListaPuntuaciones),
    keysort(ListaPuntuaciones, ListaOrdenada),
    reverse(ListaOrdenada, DelanterosRanking),
    format_output(DelanterosRanking).

format_output([]).
format_output([Puntuacion-Tipo-Jugador|Resto]) :-
    format("~2f - ~s - ~s~n", [Puntuacion, Tipo, Jugador]),
    format_output(Resto).

calcular_puntuacion_dc(Jugador, Puntuacion) :-
    promedio_goles_acertados(Jugador, PromedioGolesAcertados),
    promedio_regates(Jugador, PromedioRegates),
    promedio_pases(Jugador, PromedioPases),
    promedio_duelos_ganados(Jugador, PromedioDuelosGanados),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioGolesAcertados * 0.5 +
                  PromedioRegates * 0.2 +
                  PromedioPases * 0.1 +
                  PromedioDuelosGanados * 0.2-
                  PromedioTarjetasAmarillas * 0.1 -
                  PromedioTarjetasRojas * 0.1.


calcular_puntuacion_ed(Jugador, Puntuacion) :-  
    promedio_goles_acertados(Jugador, PromedioGolesAcertados),
    promedio_regates(Jugador, PromedioRegates),
    promedio_pases(Jugador, PromedioPases),
    promedio_duelos_ganados(Jugador, PromedioDuelosGanados),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioGolesAcertados * 0.3 +
                  PromedioRegates * 0.3 +
                  PromedioPases * 0.2 +
                  PromedioDuelosGanados * 0.2-
                  PromedioTarjetasAmarillas * 0.1 -
                  PromedioTarjetasRojas * 0.1.

calcular_puntuacion_ei(Jugador, Puntuacion) :-
    promedio_goles_acertados(Jugador, PromedioGolesAcertados),
    promedio_regates(Jugador, PromedioRegates),
    promedio_pases(Jugador, PromedioPases),
    promedio_duelos_ganados(Jugador, PromedioDuelosGanados),
    promedio_tarjetas_amarillas(Jugador, PromedioTarjetasAmarillas),
    promedio_tarjetas_rojas(Jugador, PromedioTarjetasRojas),
    Puntuacion is PromedioGolesAcertados * 0.3 +
                  PromedioRegates * 0.3 +
                  PromedioPases * 0.2 +
                  PromedioDuelosGanados * 0.2 -
                  PromedioTarjetasAmarillas * 0.1 -
                  PromedioTarjetasRojas * 0.1.